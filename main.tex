\documentclass[
	fontsize=10pt, % Base font size
	twoside=false, % Use different layouts for even and odd pages (in particular, if twoside=true, the margin column will be always on the outside)
	open=any, % If twoside=true, uncomment this to force new chapters to start on any page, not only on right (odd) pages
	%chapterprefix=true, % Uncomment to use the word "Chapter" before chapter numbers everywhere they appear
	%chapterentrydots=true, % Uncomment to output dots from the chapter name to the page number in the table of contents
	numbers=noenddot, % Comment to output dots after chapter numbers; the most common values for this option are: enddot, noenddot and auto (see the KOMAScript documentation for an in-depth explanation)
	%draft=true, % If uncommented, rulers will be added in the header and footer
	%overfullrule=true, % If uncommented, overly long lines will be marked by a black box; useful for correcting spacing problems
]{kaobook}

% Set the language
\usepackage[english]{babel} % Load characters and hyphenation
\usepackage[english=american]{csquotes} % English quotes

\usepackage{tikz}
\usepackage{circuitikz}
\usepackage{tikz-timing}
\usepackage{nicefrac}
\usepackage{subcaption}
\usepackage{pgfplots}
\usepackage{listings}
\usepackage{fontawesome5}
\usepackage{tcolorbox}
\usepackage{bytefield}
\usepackage{qrcode}

\pgfplotsset{compat=1.3}

%%% All colors used

\definecolor{gr10}{HTML}{e6e6e6}
\definecolor{gr20}{HTML}{cccccc}
\definecolor{gr30}{HTML}{b3b3b3}
\definecolor{gr40}{HTML}{999999}
\definecolor{gr50}{HTML}{808080}
\definecolor{gr60}{HTML}{666666}
\definecolor{gr70}{HTML}{4d4d4d}
\definecolor{gr80}{HTML}{333333}
\definecolor{gr90}{HTML}{191919}

%%% Sans serif font
\renewcommand{\familydefault}{\sfdefault}

%%% Setup for flowcharts

\usetikzlibrary{shapes.geometric, arrows, fit}
\tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=gr40]
\tikzstyle{process} = [rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=gr20]
\tikzstyle{command} = [rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=gr10]
\tikzstyle{decision} = [diamond, minimum width=3cm, minimum height=1cm, aspect=1.5, text centered, draw=black, fill=gr30]
\tikzstyle{arrow} = [thick,->,>=stealth]

\usepackage{array} % for custom conditions environment

\newenvironment{conditions}
  {\par\vspace{\abovedisplayskip}\noindent\begin{tabular}{>{$}l<{$} @{${}={}$} l}}
  {\end{tabular}\par\vspace{\belowdisplayskip}}

% Load packages for testing
%\usepackage{blindtext}
%\usepackage{showframe} % Uncomment to show boxes around the text area, margin, header and footer
%\usepackage{showlabels} % Uncomment to output the content of \label commands to the document where they are used

%%%%%% QR Codes
\newcounter{qrlink}
\setcounter{qrlink}{0}

\newwrite\qrfile
\immediate\openout\qrfile=\jobname.qrs

\newcommand{\labelword}[2]{%
  \phantomsection
  #1\def\@currentlabel{\unexpanded{#1}}\label{#2}%
}

\newcommand{\newqrcode}[1]{%
\stepcounter{qrlink}%
\immediate\write\qrfile{%
  \theqrlink.\ \ \noexpand\qrcode[height=3cm,nolink]{#1} \noexpand\hspace{5mm}\noexpand\begin{minipage}{10cm}\noexpand\url{#1} \noexpand\labelword{}{qr\theqrlink}\noexpand\end{minipage}\\[3mm]% 
}%
\hyperref[qr\theqrlink]{\theqrlink}%
}

\newcommand{\printqrcodes}{%
  \section*{List of QR codes}
  As of \today, all URLs listed here were still accessible.\\[3mm]
  \immediate\closeout\qrfile%
  \input{\jobname.qrs}%
  \pagebreak%
}

%%%%%%%%%%%%

% Load the bibliography package
\usepackage{styles/kaobiblio}
\addbibresource{main.bib} % Bibliography file

% Load mathematical packages for theorems and related environments. NOTE: choose only one between 'mdftheorems' and 'plaintheorems'.
\usepackage{styles/mdftheorems}
%\usepackage{styles/plaintheorems}

\makeindex[columns=3, title=Alphabetical Index, intoc] % Make LaTeX produce the files required to compile the index

\makeglossaries % Make LaTeX produce the files required to compile the glossary

\makenomenclature % Make LaTeX produce the files required to compile the nomenclature

% Reset sidenote counter at chapters
%\counterwithin*{sidenote}{chapter}

%----------------------------------------------------------------------------------------

\begin{document}

%----------------------------------------------------------------------------------------
%	BOOK INFORMATION
%----------------------------------------------------------------------------------------

%\titlehead{The \texttt{kaobook} class}
\subject{Diploma Thesis}

\title{Class-E Tesla Coil}
%\subtitle{Customise this page according to your needs}

\author{Marcher Simon\\Peyer Kassandra\\Felix Hamrle}

\date{\today}

%----------------------------------------------------------------------------------------

\frontmatter % Denotes the start of the pre-document content, uses roman numerals


%----------------------------------------------------------------------------------------
%	OUTPUT TITLE PAGE AND PREVIOUS
%----------------------------------------------------------------------------------------

% Note that \maketitle outputs the pages before here

% If twoside=false, \uppertitleback and \lowertitleback are not printed
% To overcome this issue, we set twoside=semi just before printing the title pages, and set it back to false just after the title pages
\KOMAoptions{twoside=semi}
\maketitle
\KOMAoptions{twoside=false}

%----------------------------------------------------------------------------------------
%	AFFIDAVIT
%----------------------------------------------------------------------------------------

\include{affidavit}

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS & LIST OF FIGURES/TABLES
%----------------------------------------------------------------------------------------

\begingroup % Local scope for the following commands

% Define the style for the TOC, LOF, and LOT
%\setstretch{1} % Uncomment to modify line spacing in the ToC
%\hypersetup{linkcolor=blue} % Uncomment to set the colour of links in the ToC
\setlength{\textheight}{23cm} % Manually adjust the height of the ToC pages

% Turn on compatibility mode for the etoc package
\etocstandarddisplaystyle % "toc display" as if etoc was not loaded
\etocstandardlines % toc lines as if etoc was not loaded

\tableofcontents % Output the table of contents

\listoffigures % Output the list of figures

% Comment both of the following lines to have the LOF and the LOT on different pages
\let\cleardoublepage\bigskip
\let\clearpage\bigskip

\listoftables % Output the list of tables

\endgroup

%----------------------------------------------------------------------------------------
%	MAIN BODY
%----------------------------------------------------------------------------------------

\mainmatter % Denotes the start of the main document content, resets page numbering and uses arabic numbers
\setchapterstyle{kao} % Choose the default chapter heading style

\pagelayout{wide}
\addpart{The Tesla Coil}
\pagelayout{margin}
%\input{simon/main.tex}

\pagelayout{wide}
\addpart{Design and Building}
\pagelayout{margin}
%\input{kassandra/main}

\pagelayout{wide}
\addpart{MIDI Interrupter}
\pagelayout{margin}
\input{felix/main.tex}

\appendix % From here onwards, chapters are numbered with letters, as is the appendix convention

\pagelayout{wide}
\addpart{Appendix}
\pagelayout{margin}

%----------------------------------------------------------------------------------------

\backmatter % Denotes the end of the main document content
\setchapterstyle{plain} % Output plain chapters from this point onwards

\chapter*{Special Thanks ...}

... to \textbf{Federico Marotta} for providing \enquote{kaobook}, the \LaTeX{} document class this thesis is built upon. It is licensed under the \href{https://www.latex-project.org/lppl/lppl-1-3c/}{LPPL-1.3c} and can be found on \href{https://github.com/fmarotta/kaobook}{github.com/fmarotta/kaobook}.

... to \textbf{Overleaf} for taking so long to compile documents, that we had plenty of time to reconsider our wording.

... to our headmaster \textit{Hofrat GÃ¼nter Schweigler}. Well no, actually not.

... to some others too.

\pagebreak

%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------


\defbibnote{bibnote}{Here are the references in citation order.\par\bigskip} % Prepend this text to the bibliography
\printbibliography[heading=bibintoc, title=Bibliography, prenote=bibnote] % Add the bibliography heading to the ToC, set the title of the bibliography and output the bibliography note

%----------------------------------------------------------------------------------------
%	GLOSSARY
%----------------------------------------------------------------------------------------


\include{glossary}
% This groups all entries alphabetically
% https://en.wikibooks.org/wiki/LaTeX/Glossary
\printglossary[title=Special Terms, toctitle=List of Terms] % Output the glossary, 'title' is the chapter heading for the glossary, toctitle is the table of contents heading

%%% QR codes
\pagebreak
\printqrcodes


\end{document}
